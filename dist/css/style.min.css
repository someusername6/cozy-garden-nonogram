:root,html[data-theme=light]{--color-primary: #4a7c3f;--color-primary-light: #8fbc6b;--color-primary-dark: #2d5a1f;--color-secondary: #e8dcc4;--color-secondary-dark: #d4c4a8;--color-accent: #5a9a4a;--color-bg-start: #faf8f0;--color-bg-end: #f0ebe0;--color-surface: #fff;--color-cell: #fdfcf8;--color-cell-hover: #f5f2e8;--color-cell-empty: #e8e4d8;--color-grid-border: #6b5a42;--color-text: #2d3a24;--color-text-light: #5a6652;--color-text-muted: #737365;--color-shadow: rgba(0, 0, 0, .15);--color-overlay: rgba(0, 0, 0, .5);--color-danger: #c9433f;--color-info: #4a9eba;--color-warning: #e88a00;--color-focus-ring: rgba(74, 124, 63, .25);--color-highlight: rgba(74, 124, 63, .12);--color-highlight-strong: rgba(74, 124, 63, .22);--color-skip-link-bg: #2d5a1f;--focus-ring-width: 3px;--focus-ring-offset: 2px;--btn-border-radius: 8px;--btn-border-radius-pill: 22px;--btn-transition: all .2s;--btn-min-height: 44px;--dark-color-primary: #a8d4a0;--dark-color-primary-light: #3d5a48;--dark-color-primary-dark: #90c488;--dark-color-primary-btn: #4a7a55;--dark-color-secondary: #1a2028;--dark-color-secondary-dark: #242830;--dark-color-accent: #7ac4a0;--dark-color-bg-start: #0a1018;--dark-color-bg-end: #060810;--dark-color-surface: #141820;--dark-color-cell: #181c24;--dark-color-cell-hover: #1e2430;--dark-color-cell-empty: #0c1018;--dark-color-grid-border: #2a3540;--dark-color-text: #e8eef0;--dark-color-text-light: #b8c4cc;--dark-color-text-muted: #7a8898;--dark-color-shadow: rgba(0, 0, 0, .6);--dark-color-overlay: rgba(0, 0, 0, .85);--dark-color-danger: #f07070;--dark-color-info: #60c8e8;--dark-color-warning: #f0a050;--dark-color-focus-ring: rgba(122, 196, 160, .3);--dark-color-highlight: rgba(122, 196, 160, .15);--dark-color-highlight-strong: rgba(122, 196, 160, .25);--dark-color-skip-link-bg: #3d5a48;--safe-area-top: env(safe-area-inset-top, 0px);--safe-area-bottom: env(safe-area-inset-bottom, 0px);--safe-area-left: env(safe-area-inset-left, 0px);--safe-area-right: env(safe-area-inset-right, 0px);--vh: 1vh;--cell-size: 24px}html[data-theme=dark]{--color-primary: var(--dark-color-primary);--color-primary-light: var(--dark-color-primary-light);--color-primary-dark: var(--dark-color-primary-dark);--color-primary-btn: var(--dark-color-primary-btn);--color-secondary: var(--dark-color-secondary);--color-secondary-dark: var(--dark-color-secondary-dark);--color-accent: var(--dark-color-accent);--color-bg-start: var(--dark-color-bg-start);--color-bg-end: var(--dark-color-bg-end);--color-surface: var(--dark-color-surface);--color-cell: var(--dark-color-cell);--color-cell-hover: var(--dark-color-cell-hover);--color-cell-empty: var(--dark-color-cell-empty);--color-grid-border: var(--dark-color-grid-border);--color-text: var(--dark-color-text);--color-text-light: var(--dark-color-text-light);--color-text-muted: var(--dark-color-text-muted);--color-shadow: var(--dark-color-shadow);--color-overlay: var(--dark-color-overlay);--color-danger: var(--dark-color-danger);--color-info: var(--dark-color-info);--color-warning: var(--dark-color-warning);--color-focus-ring: var(--dark-color-focus-ring);--color-highlight: var(--dark-color-highlight);--color-highlight-strong: var(--dark-color-highlight-strong);--color-skip-link-bg: var(--dark-color-skip-link-bg)}.visually-hidden{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}.skip-link{position:absolute;top:-100%;left:50%;transform:translate(-50%);background:var(--color-skip-link-bg);color:#fff;padding:12px 24px;border-radius:0 0 8px 8px;text-decoration:none;font-weight:600;z-index:1000;transition:top .2s ease}.skip-link:focus{top:0;outline:var(--focus-ring-width) solid var(--color-text);outline-offset:var(--focus-ring-offset)}*{box-sizing:border-box;-webkit-tap-highlight-color:transparent}html{height:100%;overscroll-behavior:none;touch-action:pan-x pan-y}body{font-family:Georgia,Iowan Old Style,Palatino Linotype,URW Palladio L,Times New Roman,serif;background:var(--color-bg-start);color:var(--color-text);margin:0;padding:0;min-height:100vh;min-height:calc(var(--vh, 1vh) * 100);display:flex;flex-direction:column;padding-top:var(--safe-area-top);padding-bottom:var(--safe-area-bottom);padding-left:var(--safe-area-left);padding-right:var(--safe-area-right);-webkit-user-select:none;user-select:none}.app-header{text-align:center;padding:10px 20px;flex-shrink:0}.app-header h1{margin:0;color:var(--color-primary);font-weight:400;font-size:1.5rem}.app-main{flex:1;display:flex;flex-direction:column;align-items:stretch;width:100%;padding:0 15px;overflow-y:auto;-webkit-overflow-scrolling:touch}.app-footer{text-align:center;padding:10px;flex-shrink:0}.footer-text{margin:0;font-size:12px;color:var(--color-text-light);font-style:italic}.puzzle-select{text-align:center;margin-bottom:15px;max-width:600px;margin-left:auto;margin-right:auto}.difficulty-tabs{display:flex;justify-content:center;gap:4px;margin-bottom:10px;flex-wrap:wrap}.difficulty-tab{background:var(--color-secondary);color:var(--color-text);border:none;padding:8px 12px;border-radius:15px 15px 0 0;cursor:pointer;font-size:13px;font-family:inherit;transition:all .2s;min-height:44px;min-width:44px}.difficulty-tab:hover{background:var(--color-secondary-dark)}.difficulty-tab:active{transform:scale(.98)}.difficulty-tab.active{background:var(--color-primary-light);color:var(--color-primary-dark)}.puzzle-dropdown{position:relative;display:inline-block;width:100%;max-width:280px}.puzzle-dropdown select{appearance:none;background:var(--color-surface);border:2px solid var(--color-primary-light);padding:12px 40px 12px 15px;border-radius:20px;font-size:14px;font-family:inherit;color:var(--color-text);cursor:pointer;width:100%;transition:all .2s;min-height:48px}.puzzle-dropdown select:hover{border-color:var(--color-accent)}.puzzle-dropdown select:focus{outline:none;border-color:var(--color-accent);box-shadow:0 0 0 3px #6b8e4e33}.puzzle-dropdown:after{content:"\25bc";position:absolute;right:15px;top:50%;transform:translateY(-50%);pointer-events:none;color:var(--color-accent);font-size:12px}.game-container{display:flex;flex-direction:column;align-items:center;gap:15px;flex:1;width:100%;min-height:0}.board-wrapper{display:grid;grid-template-columns:auto auto;grid-template-rows:auto auto;column-gap:4px;row-gap:4px;touch-action:none;-webkit-user-select:none;user-select:none}.col-clues{display:grid;gap:1px;align-self:end;justify-self:start}.col-clue{width:var(--cell-size);box-sizing:border-box;display:flex;flex-direction:column;justify-content:flex-end;align-items:center;gap:2px}.clue-cell{width:max(6px,calc(var(--cell-size) * .85));height:max(5px,calc(var(--cell-size) * .7));display:flex;align-items:center;justify-content:center;font-size:max(5px,calc(var(--cell-size) * .42));font-weight:700;border-radius:2px;cursor:pointer;transition:transform .1s}.clue-cell:active{transform:scale(.95)}#row-clues-container{display:grid;gap:1px;justify-self:end;align-self:start;width:max-content}.row-clues{min-width:max(30px,calc(var(--cell-size) * 3.5));height:var(--cell-size);display:flex;justify-content:flex-end;align-items:center;gap:2px}.row-clue-cell{min-width:max(5px,calc(var(--cell-size) * .65));height:max(6px,calc(var(--cell-size) * .85));display:flex;align-items:center;justify-content:center;font-size:max(5px,calc(var(--cell-size) * .42));font-weight:700;border-radius:2px;padding:0 max(1px,calc(var(--cell-size) * .08));cursor:pointer;transition:transform .1s}.row-clue-cell:active{transform:scale(.95)}.grid{display:grid;gap:1px;background:var(--color-grid-border);user-select:none;box-shadow:0 2px 8px #00000026;touch-action:none;justify-self:start;align-self:start}.cell{width:var(--cell-size);height:var(--cell-size);background:var(--color-cell);cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:14px;color:#999;transition:background .1s;user-select:none;position:relative}.cell:hover{background:var(--color-cell-hover)}.cell:active{transform:scale(.95)}.cell.highlight-row:before,.cell.highlight-col:before{content:"";position:absolute;inset:0;background-color:#5c6b4a1f;pointer-events:none}.cell.highlight-row.highlight-col:before{background-color:#5c6b4a33}.cell.maybe-color.highlight-row,.cell.maybe-color.highlight-col,.cell.maybe-empty.highlight-row,.cell.maybe-empty.highlight-col{filter:brightness(.93)}.cell.maybe-color.highlight-row.highlight-col,.cell.maybe-empty.highlight-row.highlight-col{filter:brightness(.88)}.cell.highlight-cell{box-shadow:inset 0 0 0 2px var(--color-primary);z-index:1}.row-clues.highlight-clue,.col-clue.highlight-clue{background:#5c6b4a14;border-radius:4px}.row-clues.satisfied,.col-clue.satisfied{opacity:.4}.row-clues.satisfied .row-clue-cell,.col-clue.satisfied .clue-cell{text-decoration:line-through}.cell.marked-empty{background:var(--color-cell-empty)}.cell.marked-empty:after{content:"\2715";color:var(--color-text-light);font-weight:700;font-size:14px}.cell.maybe-color,.cell.maybe-empty{--fold-outline-color: rgba(0, 0, 0, .5)}html[data-theme=dark] .cell.maybe-empty{--fold-outline-color: rgba(255, 255, 255, .6)}.cell.maybe-color:before,.cell.maybe-empty:before{content:"";position:absolute;inset:0 0 auto auto;width:0;height:0;border-style:solid;--fold-size: calc(var(--cell-size) * .4);border-width:0 var(--fold-size) var(--fold-size) 0;border-color:transparent var(--color-primary) transparent transparent;background-color:transparent;filter:drop-shadow(-1px 1px 0 var(--fold-outline-color)) drop-shadow(1px -1px 0 var(--fold-outline-color));pointer-events:none;z-index:1}.cell.maybe-empty{background:var(--color-cell)}.cell.maybe-empty:after{content:"\2715";color:var(--color-text-light);font-weight:700;font-size:14px}.cell.maybe-color{background:var(--cell-color)!important}.palette-menu-btn{width:40px;height:40px;min-width:44px;min-height:44px;border:2px dashed var(--color-text-muted);border-radius:50%;background:var(--color-surface);cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .2s;color:var(--color-text-light);position:relative;box-sizing:border-box}.palette-menu-btn:hover{border-color:var(--color-primary);color:var(--color-primary);transform:scale(1.05)}.palette-menu-btn:active{transform:scale(1)}.palette-menu-btn.menu-open{border-color:var(--color-primary);background:var(--color-primary-light);color:var(--color-primary-dark)}body.pencil-mode .palette-menu-btn{border-style:solid;border-color:var(--color-accent);background:var(--color-accent);color:#fff}.palette-menu-btn .pencil-badge{position:absolute;top:-4px;right:-4px;background:var(--color-accent);color:#fff;font-size:10px;font-weight:700;min-width:16px;height:16px;border-radius:8px;display:none;align-items:center;justify-content:center;padding:0 4px}.palette-menu-btn.has-pencil-marks .pencil-badge{display:flex}.menu-icon-svg{width:20px;height:20px}.mode-menu{display:none;position:fixed;background:var(--color-surface);border-radius:12px;box-shadow:0 4px 20px #00000026;z-index:1000;min-width:220px;max-width:calc(100vw - 32px);overflow:hidden}.mode-menu.open{display:block;animation:menuFadeIn .15s ease-out}@keyframes menuFadeIn{0%{opacity:0;transform:translateY(-8px)}to{opacity:1;transform:translateY(0)}}.mode-menu-section{padding:8px}.mode-menu-section+.mode-menu-section{border-top:1px solid var(--color-secondary)}.pencil-actions-section{display:none}.pencil-actions-section.has-marks{display:block}.mode-menu-item{display:flex;align-items:center;gap:12px;width:100%;padding:10px 12px;background:transparent;border:none;border-radius:8px;cursor:pointer;font-family:inherit;font-size:14px;color:var(--color-text);text-align:left;transition:background .15s}.mode-menu-item:hover{background:var(--color-secondary)}.mode-menu-item.active{background:var(--color-primary-light);color:var(--color-primary-dark)}.mode-menu-item.active .mode-hint{color:var(--color-primary)}.mode-icon{width:18px;height:18px;flex-shrink:0}.mode-hint{margin-left:auto;font-size:12px;color:var(--color-text-muted)}.mode-menu-action{color:var(--color-text-light)}.mode-menu-action:hover{color:var(--color-text)}.mode-menu-backdrop{display:none;position:fixed;inset:0;z-index:99}.mode-menu-backdrop.open{display:block}.history-controls{display:flex;gap:6px}.history-btn{background:var(--color-secondary);border:none;width:44px;height:44px;border-radius:50%;cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:18px;color:var(--color-text);transition:all .2s}.history-btn:hover:not(:disabled){background:var(--color-secondary-dark)}.history-btn:active:not(:disabled){transform:scale(.95)}.history-btn:disabled{opacity:.4;cursor:not-allowed}.history-icon{width:24px;height:24px;color:var(--color-text)}.redo-icon{transform:scaleX(-1)}kbd{display:inline-block;background:var(--color-secondary);border:1px solid var(--color-secondary-dark);border-radius:4px;padding:1px 5px;font-size:11px;font-family:monospace;color:var(--color-text)}.palette{display:flex;gap:5px;align-items:center;padding:10px 12px;background:var(--color-surface);border-radius:20px;box-shadow:0 2px 8px #0000001a;flex-wrap:nowrap;justify-content:center;position:relative}.palette-label{font-size:14px;margin-right:6px;color:var(--color-accent)}.color-btn{width:40px;height:40px;border:3px solid rgba(0,0,0,.15);border-radius:50%;cursor:pointer;transition:transform .1s,border-color .1s;box-shadow:0 1px 3px #0003;box-sizing:border-box;min-width:44px;min-height:44px}.color-btn:hover{transform:scale(1.1)}.color-btn:active{transform:scale(1.05)}.color-btn.selected{border-color:transparent;transform:scale(1.15);box-shadow:0 0 0 2px var(--color-surface),0 0 0 5px var(--color-primary)}.color-btn.eraser{background:var(--color-surface);position:relative}.color-btn.eraser:after{content:"\2715";color:var(--color-text-light);font-size:20px;font-weight:700;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.status{display:none}.toast{position:absolute;bottom:16px;left:50%;transform:translate(-50%) translateY(10px);background:var(--color-surface);color:var(--color-text);padding:10px 20px;border-radius:20px;font-size:14px;box-shadow:0 4px 16px var(--color-shadow);z-index:100;opacity:0;pointer-events:none;transition:opacity .3s ease,transform .3s ease;text-align:center;max-width:calc(100% - 32px)}.toast.visible{opacity:.95;transform:translate(-50%) translateY(0);pointer-events:auto}.toast.toast-success{background:var(--color-primary-light);color:var(--color-primary-dark)}.toast.toast-info{background:var(--color-secondary);color:var(--color-text)}@keyframes pulse{0%,to{transform:scale(1)}50%{transform:scale(1.05)}}.controls{display:flex;gap:10px;flex-wrap:wrap;justify-content:center;-webkit-user-select:none;user-select:none;margin-top:auto;width:100%;padding:12px 16px;background:var(--color-surface);border-radius:20px 20px 0 0;box-shadow:0 -2px 8px #0000001a;flex-shrink:0}.btn{background:var(--color-secondary);color:var(--color-text);border:none;padding:0 16px;height:var(--btn-min-height);border-radius:var(--btn-border-radius-pill);cursor:pointer;font-size:14px;font-family:inherit;transition:var(--btn-transition);display:flex;align-items:center;justify-content:center}.btn:hover:not(:disabled){background:var(--color-secondary-dark)}.btn:active:not(:disabled){transform:scale(.95)}.btn-primary{background:var(--color-primary-light);color:var(--color-primary-dark)}.btn-primary:hover{background:var(--color-accent)}.btn-hold{position:relative;overflow:hidden;-webkit-user-select:none;user-select:none;touch-action:manipulation}.btn-hold-fill{position:absolute;top:0;left:0;height:100%;width:0;background:red;opacity:.6;pointer-events:none}.btn-hold.holding .btn-hold-fill{transition:width var(--hold-duration, 1.2s) linear;width:100%}.btn-hold:not(.holding) .btn-hold-fill{transition:width .15s ease-out;width:0}.btn-hold.hold-complete .btn-hold-fill{transition:none}.btn-hold-text{position:relative;z-index:1}.btn-hold:disabled{opacity:.4;cursor:not-allowed}.help-btn{background:var(--color-secondary);border:none;width:var(--btn-min-height);height:var(--btn-min-height);border-radius:50%;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:var(--btn-transition)}.help-btn:hover{background:var(--color-secondary-dark)}.help-btn:active{transform:scale(.95)}.help-icon{width:24px;height:24px;color:var(--color-text)}.help-modal{position:fixed;inset:0;z-index:2000;display:flex;align-items:center;justify-content:center;opacity:0;visibility:hidden;transition:opacity .2s ease,visibility .2s ease}.help-modal.visible{opacity:1;visibility:visible}.help-modal-backdrop{position:absolute;inset:0;background:#00000080}.help-modal-content{position:relative;background:var(--color-surface);border-radius:16px;padding:24px;max-width:340px;width:calc(100% - 40px);max-height:calc(100vh - 80px);overflow-y:auto;box-shadow:0 8px 32px #0003;transform:scale(.95);transition:transform .2s ease}.help-modal.visible .help-modal-content{transform:scale(1)}.help-modal-close{position:absolute;top:12px;right:12px;width:32px;height:32px;border:none;background:var(--color-secondary);border-radius:50%;font-size:20px;line-height:1;color:var(--color-text-light);cursor:pointer;display:flex;align-items:center;justify-content:center;transition:background .2s}.help-modal-close:hover{background:var(--color-primary-light);color:var(--color-primary-dark)}.help-modal h2{margin:0 0 16px;font-size:20px;color:var(--color-primary-dark);text-align:center}.help-list{list-style:none;padding:0;margin:0}.help-list li{padding:10px 0;border-bottom:1px solid var(--color-secondary);font-size:14px;line-height:1.5;color:var(--color-text)}.help-list li:last-child{border-bottom:none}.help-list li strong{color:var(--color-primary-dark)}.help-list .help-section-title{font-size:12px;font-weight:600;color:var(--color-text-light);text-transform:uppercase;letter-spacing:.5px;padding:16px 0 6px;border-bottom:none}.confirm-modal{position:fixed;inset:0;z-index:3000;display:flex;align-items:center;justify-content:center;opacity:0;visibility:hidden;transition:opacity .2s ease,visibility .2s ease}.confirm-modal.visible{opacity:1;visibility:visible}.confirm-modal-backdrop{position:absolute;inset:0;background:#0009}.confirm-modal-content{position:relative;background:var(--color-surface);border-radius:16px;padding:24px;max-width:320px;width:calc(100% - 40px);box-shadow:0 8px 32px #0000004d;transform:scale(.95);transition:transform .2s ease;text-align:center}.confirm-modal.visible .confirm-modal-content{transform:scale(1)}.confirm-modal-title{margin:0 0 12px;font-size:1.25rem;font-weight:400;color:var(--color-text)}.confirm-modal-message{margin:0 0 24px;font-size:.95rem;line-height:1.5;color:var(--color-text-light)}.confirm-modal-actions{display:flex;gap:12px;justify-content:center}.confirm-modal-btn{flex:1;padding:12px 20px;font-size:1rem;font-family:inherit;border:none;border-radius:var(--btn-border-radius);cursor:pointer;transition:var(--btn-transition);min-height:var(--btn-min-height)}.confirm-modal-btn:active{transform:scale(.98)}.confirm-modal-btn-secondary{background:var(--color-secondary);color:var(--color-text)}.confirm-modal-btn-secondary:hover{background:var(--color-secondary-dark)}.confirm-modal-btn-primary{background:var(--color-primary);color:#fff}.confirm-modal-btn-primary:hover{background:var(--color-primary-dark)}.confirm-modal-btn-danger{background:var(--color-danger);color:#fff}.confirm-modal-btn-danger:hover{opacity:.9}.confirm-modal.alert-mode .confirm-modal-btn-secondary{display:none}.confirm-modal.alert-mode .confirm-modal-btn-primary{flex:none;min-width:120px}.update-banner{position:fixed;bottom:var(--safe-area-bottom);left:0;right:0;background:var(--color-primary);color:#fff;padding:12px 20px;display:flex;align-items:center;justify-content:center;gap:15px;z-index:1000;box-shadow:0 -2px 10px #0003}.update-banner button{background:#fff;color:var(--color-primary);border:none;padding:8px 16px;border-radius:15px;cursor:pointer;font-size:13px;font-family:inherit;min-height:36px}.update-banner button:hover{opacity:.9}html[data-theme=dark] .update-banner{background:var(--color-primary-btn)}html[data-theme=dark] .update-banner button{color:var(--color-primary-btn)}.zoom-container{position:relative;max-width:100%;flex:1;min-height:0;overflow:hidden;display:flex;align-items:center;justify-content:center;touch-action:pan-x pan-y;-webkit-overflow-scrolling:touch;scrollbar-width:none;-ms-overflow-style:none}.zoom-container::-webkit-scrollbar{display:none}.zoom-container.is-zoomed{overflow:auto;align-items:flex-start;justify-content:flex-start}.zoom-container.is-zoomed .clue-cell{width:max(6px,calc(var(--cell-size) * .95));height:max(5px,calc(var(--cell-size) * .65));font-size:max(5px,calc(var(--cell-size) * .38))}.zoom-container.is-zoomed .row-clue-cell{min-width:max(5px,calc(var(--cell-size) * .55));height:max(6px,calc(var(--cell-size) * .95));font-size:max(5px,calc(var(--cell-size) * .38))}.clue-tooltip{position:fixed;left:50%;transform:translate(-50%);background:var(--color-surface);border-radius:12px;padding:10px 16px;box-shadow:0 4px 20px var(--color-shadow);z-index:100;min-width:180px;max-width:calc(100vw - 32px);opacity:0;pointer-events:none;transition:opacity .15s ease-out}.clue-tooltip.visible{opacity:1}.clue-tooltip.position-bottom{bottom:calc(var(--safe-area-bottom) + 180px);top:auto}.clue-tooltip.position-top{top:calc(var(--safe-area-top) + 160px);bottom:auto}.clue-tooltip.dragging{opacity:.4}.clue-tooltip-row,.clue-tooltip-col{display:flex;align-items:center;gap:8px;padding:4px 0}.clue-tooltip-row+.clue-tooltip-col{border-top:1px solid var(--color-cell-hover);margin-top:4px;padding-top:8px}.clue-tooltip-label{font-size:11px;color:var(--color-text-muted);min-width:28px;flex-shrink:0}.clue-tooltip-clues{display:flex;flex-wrap:nowrap;gap:4px;font-size:13px;font-weight:600;overflow-x:auto;-webkit-overflow-scrolling:touch;scrollbar-width:none;max-width:calc(100vw - 100px)}.clue-tooltip-clues::-webkit-scrollbar{display:none}.clue-tooltip-num{display:inline-flex;align-items:center;justify-content:center;min-width:22px;height:24px;padding:0 5px;border-radius:4px;flex-shrink:0}.clue-tooltip-num.satisfied{opacity:.4;text-decoration:line-through}.zoom-controls{position:fixed;bottom:calc(var(--safe-area-bottom) + 100px);right:calc(var(--safe-area-right) + 16px);display:flex;flex-direction:column;gap:8px;z-index:100;opacity:.4;pointer-events:auto;transition:opacity .2s}.zoom-controls:hover,.zoom-controls:focus-within{opacity:1}.zoom-container.is-zoomed~.zoom-controls{opacity:.8}.zoom-btn{width:44px;height:44px;border-radius:50%;border:none;background:var(--color-surface);color:var(--color-text);font-size:20px;font-weight:700;cursor:pointer;box-shadow:0 2px 8px var(--color-shadow);display:flex;align-items:center;justify-content:center;transition:transform .1s,background .2s,box-shadow .2s}.zoom-btn:hover{background:var(--color-cell-hover)}.zoom-btn:active{transform:scale(.95)}.zoom-btn:disabled{opacity:.3;cursor:not-allowed}.zoom-btn.zoom-fit.highlighted{background:var(--color-primary-light);color:var(--color-primary-dark);box-shadow:0 2px 12px var(--color-shadow)}.zoom-hint-toast{position:fixed;bottom:calc(var(--safe-area-bottom) + 60px);left:50%;transform:translate(-50%) translateY(20px);background:var(--color-text);color:var(--color-surface);padding:12px 20px;border-radius:24px;font-size:14px;z-index:1000;opacity:0;pointer-events:none;transition:opacity .3s,transform .3s;white-space:nowrap}.zoom-hint-toast.visible{opacity:1;transform:translate(-50%) translateY(0)}html[data-theme=dark] .clue-tooltip{box-shadow:0 4px 20px #00000080}html[data-theme=dark] .zoom-btn{box-shadow:0 2px 8px #0006}html[data-theme=dark] .zoom-hint-toast{background:var(--color-surface);color:var(--color-text);box-shadow:0 4px 20px #00000080}html[data-theme=dark] .color-btn{border-color:#fff3}html[data-theme=dark] .home-btn-primary,html[data-theme=dark] .victory-btn-primary,html[data-theme=dark] .confirm-modal-btn-primary{background:var(--color-primary-btn);border-color:var(--color-primary-btn)}@media (hover: hover) and (pointer: fine){.zoom-controls{display:none}}@media (orientation: landscape){.clue-tooltip.position-bottom,.zoom-controls{bottom:calc(var(--safe-area-bottom) + 80px)}}@media (max-width: 429px){.palette.palette-8-buttons{padding:10px;gap:5px}.palette.palette-8-buttons .color-btn,.palette.palette-8-buttons .palette-menu-btn{width:40px;height:40px;min-width:40px!important;min-height:40px!important;flex-shrink:0}}@media (max-width: 379px){.palette.palette-8-buttons{padding:8px 10px;gap:4px}.palette.palette-8-buttons .color-btn,.palette.palette-8-buttons .palette-menu-btn{width:38px;height:38px;min-width:38px!important;min-height:38px!important}.palette.palette-8-buttons .color-btn.eraser:after{font-size:16px}}@media (max-width: 360px){:root{--cell-size: 20px}.cell{width:var(--cell-size);height:var(--cell-size)}.col-clue{width:var(--cell-size)}.row-clues{min-width:max(30px,calc(var(--cell-size) * 3));height:var(--cell-size)}.palette{padding:8px 10px;gap:4px}.color-btn{width:34px;height:34px;min-width:34px;min-height:34px}.palette-menu-btn{width:32px;height:32px;min-width:32px;min-height:32px}.menu-icon-svg{width:14px;height:14px}}@media (min-width: 768px){:root{--cell-size: 28px}.app-header h1{font-size:2rem}.game-container{gap:20px}.cell{width:var(--cell-size);height:var(--cell-size)}.col-clue{width:var(--cell-size)}.row-clues{height:var(--cell-size);min-width:max(40px,calc(var(--cell-size) * 3.5))}.status{font-size:18px}}@media (min-width: 1200px){:root{--cell-size: 32px}.game-container{max-width:900px;margin:0 auto}.board-wrapper{gap:4px}.palette{gap:12px}.color-btn{width:48px;height:48px}.btn{padding:14px 28px;font-size:1.1rem}.instructions{font-size:15px;max-width:700px}}@media (max-height: 500px) and (orientation: landscape){.app-header{padding:5px 20px}.app-header h1{font-size:1.2rem}.puzzle-select{margin-bottom:10px}.game-container{gap:10px}.app-footer{display:none}}@media (display-mode: standalone){body{padding-bottom:max(var(--safe-area-bottom),20px)}}@media (hover: none){.cell:hover{background:var(--color-cell)}.cell.highlight-row,.cell.highlight-col,.cell.highlight-row.highlight-col,.cell.highlight-cell{box-shadow:none}.row-clues.highlight-clue,.col-clue.highlight-clue{background:transparent}.color-btn:hover{transform:none}.btn:hover,.difficulty-tab:hover{background:var(--color-secondary)}.difficulty-tab.active:hover{background:var(--color-primary-light)}.mode-menu-item:hover{background:transparent}.history-btn:hover:not(:disabled){background:var(--color-secondary)}.theme-option:hover{background:transparent}}:focus-visible{outline:var(--focus-ring-width) solid var(--color-accent);outline-offset:var(--focus-ring-offset)}.btn:focus-visible,.home-btn:focus-visible,.victory-btn:focus-visible,.mode-menu-item:focus-visible,.palette-menu-btn:focus-visible,.history-btn:focus-visible,.help-btn:focus-visible,.difficulty-tab:focus-visible,.tutorial-next-btn:focus-visible,.tutorial-skip:focus-visible,.settings-btn:focus-visible,.settings-danger-btn:focus-visible,.settings-debug-btn:focus-visible{outline:var(--focus-ring-width) solid var(--color-accent);outline-offset:var(--focus-ring-offset)}.color-btn:focus-visible:not(.selected){outline:var(--focus-ring-width) solid var(--color-primary);outline-offset:3px;transform:scale(1.15)}.header-back-btn:focus-visible{outline:var(--focus-ring-width) solid var(--color-accent);outline-offset:var(--focus-ring-offset);background:var(--color-secondary)}.theme-option:focus-visible{outline:var(--focus-ring-width) solid var(--color-accent);outline-offset:var(--focus-ring-offset)}.puzzle-card:focus-visible{outline:var(--focus-ring-width) solid var(--color-primary);outline-offset:var(--focus-ring-offset);transform:translateY(-2px)}.collection-section-header:focus-visible{outline:var(--focus-ring-width) solid var(--color-accent);outline-offset:var(--focus-ring-offset);border-radius:4px;position:relative;z-index:11}.collection-search-input:focus-visible{outline:none;border-color:var(--color-primary);box-shadow:0 0 0 3px #4c6c4a33}.cell:focus-visible{outline:var(--focus-ring-width) solid var(--color-primary);outline-offset:-3px;z-index:2}.clue-cell:focus-visible,.row-clue-cell:focus-visible{outline:var(--focus-ring-width) solid var(--color-primary);outline-offset:var(--focus-ring-offset)}.settings-toggle:focus-within .toggle-slider{box-shadow:0 0 0 3px #4c6c4a4d}.update-banner button:focus-visible{outline:var(--focus-ring-width) solid #fff;outline-offset:var(--focus-ring-offset)}html[data-theme=dark] :focus-visible{outline-color:var(--color-primary-light)}html[data-theme=dark] .color-btn:focus-visible,html[data-theme=dark] .cell:focus-visible,html[data-theme=dark] .puzzle-card:focus-visible{outline-color:var(--color-accent)}@media (prefers-contrast: high){:root{--color-grid-border: #000;--color-text: #000}.cell{border:1px solid #000}:focus-visible{outline:var(--focus-ring-width) solid #000;outline-offset:var(--focus-ring-offset)}}@media (prefers-reduced-motion: reduce){*,*:before,*:after{animation-duration:.01ms!important;animation-iteration-count:1!important;transition-duration:.01ms!important}}.collection-search{margin:0 -16px;padding:12px 16px 16px;position:sticky;top:0;z-index:10;background:var(--color-bg-start)}#screen-collection .screen-content{padding-top:0}.collection-search-input{width:100%;max-width:800px;display:block;margin:0 auto;padding:10px 14px;font-size:16px;font-family:inherit;border:1px solid var(--color-secondary-dark);border-radius:8px;background:var(--color-bg-end);color:var(--color-text);outline:none;transition:border-color .2s,box-shadow .2s;-webkit-user-select:text;user-select:text}.collection-search-input:focus{border-color:var(--color-primary);box-shadow:0 0 0 2px #4c6c4a26}.collection-search-input::placeholder{color:var(--color-text-muted)}.collection-screen{width:100%;max-width:800px;margin:0 auto;padding-bottom:20px}.collection-empty-state{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px 20px;text-align:center}.collection-empty-message{color:var(--color-text-muted);font-size:1rem;margin:0}.collection-header{text-align:center;margin-bottom:20px}.collection-title{margin:0 0 8px;color:var(--color-primary);font-weight:400;font-size:1.3rem}.collection-stats{font-size:14px;color:var(--color-text-light)}.back-btn{display:inline-flex;align-items:center;gap:6px;background:var(--color-surface);border:1px solid var(--color-secondary-dark);padding:8px 14px;border-radius:18px;cursor:pointer;font-size:14px;font-family:inherit;color:var(--color-text);transition:all .2s;min-height:40px;margin-bottom:10px}.back-btn:hover{background:var(--color-secondary)}.back-btn:active{transform:scale(.98)}.back-btn-arrow{font-size:16px}.collection-section{width:100%;margin-bottom:24px}.collection-section.collapsed{margin-bottom:8px}.collection-section.collapsed .collection-section-header{margin-bottom:0;border-bottom-color:transparent}.collection-section-header{display:flex;align-items:center;gap:10px;margin-bottom:12px;padding:8px 0 6px;border-bottom:2px solid var(--color-secondary);cursor:pointer;user-select:none;transition:background .15s;border-radius:4px 4px 0 0}.collection-section-header:hover{background:#00000008}.collection-section-header:active{background:#0000000f}.section-chevron{font-size:12px;color:var(--color-text-light);width:16px;text-align:center;transition:transform .2s}.collection-section.collapsed .section-chevron{color:var(--color-text-muted)}.collection-section-title{margin:0;font-size:1.1rem;font-weight:400;color:var(--color-primary-dark)}.collection-section-stats{font-size:13px;color:var(--color-text-light);background:var(--color-secondary);padding:3px 10px;border-radius:10px}.collection-section-stats.complete{background:var(--color-primary-light);color:var(--color-primary-dark)}.collection-grid{display:flex;flex-wrap:wrap;justify-content:center;gap:12px}.puzzle-card{width:90px;background:var(--color-surface);border:2px solid var(--color-secondary-dark);border-radius:12px;padding:10px;cursor:pointer;transition:all .2s;box-shadow:0 2px 6px #00000014;display:flex;flex-direction:column;align-items:center;text-align:center}.puzzle-card:hover{transform:translateY(-2px);box-shadow:0 4px 12px #0000001f}.puzzle-card:active{transform:scale(.98)}.puzzle-card.completed{background:color-mix(in srgb,var(--color-primary-light) 15%,var(--color-surface));border:2px solid var(--color-primary-light)}.puzzle-card-preview{width:60px;height:60px;display:flex;align-items:center;justify-content:center;margin-bottom:8px;border-radius:6px}.puzzle-card-preview:has(.puzzle-card-placeholder){background:var(--color-cell);overflow:hidden}.puzzle-card-placeholder{font-size:32px;font-weight:700;color:var(--color-text-muted);display:flex;align-items:center;justify-content:center;width:100%;height:100%}.puzzle-mini-canvas{image-rendering:pixelated;image-rendering:crisp-edges;width:100%;height:100%;object-fit:contain}.puzzle-card-name{font-size:13px;color:var(--color-text);line-height:1.2;margin-bottom:4px;word-break:break-word;height:3.6em;display:flex;align-items:center;justify-content:center;overflow:hidden}.puzzle-card-badge{font-size:11px;color:var(--color-text-light);background:var(--color-secondary);padding:2px 8px;border-radius:8px}.puzzle-card.completed .puzzle-card-badge{background:var(--color-primary-light);color:var(--color-primary-dark)}body.showing-collection .game-container,body.showing-game .collection-screen{display:none}.current-puzzle-title{text-align:center;font-size:14px;color:var(--color-text-light);margin-bottom:10px}.current-puzzle-title strong{color:var(--color-text)}@media (min-width: 480px){.collection-grid{gap:14px}.puzzle-card{width:100px}.puzzle-card-preview{width:70px;height:70px}.puzzle-card-name{font-size:14px}.puzzle-card-badge{font-size:12px}}@media (min-width: 768px){.collection-grid{gap:16px}.puzzle-card{width:110px;padding:12px}.puzzle-card-preview{width:80px;height:80px}.puzzle-card-name{font-size:14px}}@media (hover: none){.puzzle-card:hover{transform:none;box-shadow:0 2px 6px #00000014}.back-btn:hover{background:var(--color-surface)}.collection-section-header:hover{background:transparent}}.screen{position:fixed;inset:0;display:flex;flex-direction:column;background:var(--color-bg-start);transition:opacity .3s ease,transform .3s ease;padding-top:var(--safe-area-top);padding-bottom:var(--safe-area-bottom);padding-left:var(--safe-area-left);padding-right:var(--safe-area-right)}.screen-active{opacity:1;transform:translate(0);pointer-events:auto;z-index:10}.screen-hidden{opacity:0;transform:translate(20px);pointer-events:none;z-index:1}.screen-header{display:flex;align-items:center;justify-content:space-between;padding:12px 16px;background:var(--color-surface);border-bottom:1px solid var(--color-secondary);flex-shrink:0}.header-back-btn{width:40px;height:40px;border:none;background:transparent;font-size:1.5rem;color:var(--color-primary);cursor:pointer;border-radius:8px;display:flex;align-items:center;justify-content:center}.header-back-btn:active{background:var(--color-secondary)}.header-title{margin:0;font-size:1.2rem;font-weight:400;color:var(--color-primary)}.header-spacer{width:40px}.screen-content{flex:1;overflow-y:auto;-webkit-overflow-scrolling:touch;padding:16px}#screen-puzzle .screen-content{display:flex;flex-direction:column;overflow:hidden;padding:16px 16px 0}.splash-content{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;padding:40px 20px}.splash-logo{margin-bottom:20px}.splash-icon{width:80px;height:80px;display:block;animation:splash-bounce 1s ease-in-out infinite}@keyframes splash-bounce{0%,to{transform:translateY(0)}50%{transform:translateY(-10px)}}.splash-title{font-size:2.5rem;color:var(--color-primary);margin:0 0 8px;font-weight:400}.splash-tagline{font-size:1.1rem;color:var(--color-text-light);margin:0 0 40px}.splash-loader{width:200px;height:4px;background:var(--color-secondary);border-radius:2px;overflow:hidden}.splash-loader-bar{height:100%;width:30%;background:var(--color-primary);border-radius:2px;animation:splash-load 1.5s ease-in-out infinite}@keyframes splash-load{0%{transform:translate(-100%)}to{transform:translate(400%)}}.home-content{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;padding:40px 20px}.home-logo{margin-bottom:16px}.home-icon{width:64px;height:64px;display:block}.home-title{font-size:2.2rem;color:var(--color-primary);margin:0 0 8px;font-weight:400}.home-tagline{font-size:1rem;color:var(--color-text-light);margin:0 0 40px}.home-menu{display:flex;flex-direction:column;gap:12px;width:100%;max-width:280px}.home-btn{display:flex;align-items:center;justify-content:center;gap:10px;padding:16px 24px;font-size:1.1rem;font-family:inherit;border:2px solid var(--color-secondary-dark);border-radius:12px;background:var(--color-surface);color:var(--color-text);cursor:pointer;transition:all .2s}.home-btn:active{transform:scale(.98)}.home-btn-primary{background:var(--color-primary);border-color:var(--color-primary);color:#fff}.home-btn-primary:active{background:var(--color-primary-dark)}.btn-icon{font-size:1.2rem}.home-footer{margin-top:40px}.home-progress{font-size:.9rem;color:var(--color-text-light);margin:0}.victory-content{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;padding:40px 20px}.victory-header{margin-bottom:30px}.victory-title{font-size:2rem;color:var(--color-primary);margin:10px 0 0;font-weight:400}.victory-puzzle-display{margin-bottom:24px}.victory-image{width:200px;height:200px;margin:0 auto 20px;display:flex;align-items:center;justify-content:center;background:var(--color-surface);border-radius:12px;box-shadow:0 4px 12px #0000001a}.victory-image canvas{border-radius:4px}.victory-puzzle-name{font-size:1.3rem;color:var(--color-text);margin:0;font-weight:400}.victory-stats{display:flex;gap:24px;margin-bottom:32px}.victory-stat{display:flex;flex-direction:column;align-items:center}.stat-label{font-size:.85rem;color:var(--color-text-light);margin-bottom:4px}.stat-value{font-size:1.5rem;color:var(--color-primary)}.victory-actions{display:flex;flex-direction:column;gap:12px;width:100%;max-width:280px}.victory-btn{display:flex;align-items:center;justify-content:center;gap:8px;padding:14px 24px;font-size:1rem;font-family:inherit;border:2px solid var(--color-secondary-dark);border-radius:10px;background:var(--color-surface);color:var(--color-text);cursor:pointer;transition:all .2s}.victory-btn:active{transform:scale(.98)}.victory-btn-primary{background:var(--color-primary);border-color:var(--color-primary);color:#fff}.settings-content{max-width:400px;margin:0 auto}.settings-group{background:var(--color-surface);border-radius:12px;padding:16px;margin-bottom:16px}.settings-group-title{font-size:.85rem;color:var(--color-text-light);text-transform:uppercase;letter-spacing:.5px;margin:0 0 12px;font-weight:400}.settings-toggle{display:flex;align-items:center;justify-content:space-between;padding:12px 0;cursor:pointer;border-bottom:1px solid var(--color-secondary)}.settings-toggle:last-child{border-bottom:none;padding-bottom:0}.settings-toggle:first-of-type{padding-top:0}.toggle-label{font-size:1rem;color:var(--color-text)}.settings-toggle input[type=checkbox]{display:none}.toggle-slider{width:50px;height:28px;background:var(--color-secondary);border-radius:14px;position:relative;transition:background .2s}.toggle-slider:after{content:"";position:absolute;width:22px;height:22px;background:#fff;border-radius:50%;top:3px;left:3px;transition:transform .2s;box-shadow:0 2px 4px #0003}.settings-toggle input:checked+.toggle-slider{background:var(--color-primary)}.settings-toggle input:checked+.toggle-slider:after{transform:translate(22px)}.settings-theme-selector{display:flex;align-items:center;justify-content:space-between;padding:12px 0}.theme-options{display:flex;gap:8px}.theme-option{display:flex;flex-direction:column;align-items:center;gap:4px;padding:10px 14px;border:2px solid var(--color-secondary-dark);border-radius:10px;background:var(--color-surface);color:var(--color-text);cursor:pointer;transition:var(--btn-transition);font-family:inherit}.theme-option:hover{border-color:var(--color-primary-light)}.theme-option:active{transform:scale(.98)}.theme-option.active{border-color:var(--color-primary);background:var(--color-primary-light);color:var(--color-primary-dark)}.theme-icon{font-size:1.3rem;height:1.4rem;line-height:1.4rem;display:flex;align-items:center;justify-content:center}.theme-name{font-size:.75rem;line-height:1}.settings-btn,.settings-danger-btn,.settings-debug-btn{width:100%;padding:14px;font-size:1rem;font-family:inherit;border:2px solid;border-radius:var(--btn-border-radius);background:transparent;cursor:pointer;transition:var(--btn-transition)}.settings-btn{border-color:var(--color-primary);color:var(--color-primary)}.settings-btn:active{background:var(--color-primary);color:var(--color-surface)}.settings-danger-btn{border-color:var(--color-danger);color:var(--color-danger)}.settings-danger-btn:active{background:var(--color-danger);color:var(--color-surface)}.settings-debug-btn{border-color:var(--color-info);color:var(--color-info);margin-top:10px}.settings-debug-btn:active{background:var(--color-info);color:var(--color-surface)}.settings-footer{text-align:center;padding:20px}.settings-version{font-size:.85rem;color:var(--color-text-muted);margin:0}.tutorial-content{flex:1;display:flex;flex-direction:column;padding:20px;position:relative}.tutorial-skip{position:absolute;top:20px;right:20px;padding:8px 16px;font-size:.9rem;font-family:inherit;border:none;background:transparent;color:var(--color-text-light);cursor:pointer}.tutorial-steps{flex:1;display:flex;align-items:center;justify-content:center}.tutorial-step{display:none;flex-direction:column;align-items:center;text-align:center;max-width:320px;animation:tutorial-fade-in .3s ease}.tutorial-step.active{display:flex}@keyframes tutorial-fade-in{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.tutorial-illustration{margin-bottom:24px}.tutorial-emoji{width:80px;height:80px;display:block}.tutorial-heading{font-size:1.5rem;color:var(--color-primary);margin:0 0 12px;font-weight:400}.tutorial-text{font-size:1rem;color:var(--color-text);line-height:1.6;margin:0}.tutorial-nav{display:flex;flex-direction:column;align-items:center;gap:20px;padding:20px 0}.tutorial-dots{display:flex;gap:8px}.tutorial-dot{width:8px;height:8px;border-radius:50%;background:var(--color-secondary-dark);transition:var(--btn-transition)}.tutorial-dot.active{background:var(--color-primary)}.tutorial-next-btn{padding:14px 48px;font-size:1.1rem;font-family:inherit;border:none;border-radius:10px;background:var(--color-primary);color:#fff;cursor:pointer;transition:var(--btn-transition)}.tutorial-next-btn:active{transform:scale(.98);background:var(--color-primary-dark)}.flying-stamp{position:fixed;z-index:9999;pointer-events:none;border-radius:8px;box-shadow:0 8px 32px #0000004d;transition:left .6s ease-out,top .6s ease-out,transform .6s ease-out,box-shadow .6s ease-out;transform-origin:center center}.flying-stamp.landed{box-shadow:0 2px 8px #0003}.puzzle-card-preview.awaiting-stamp{background:var(--color-cell)}.puzzle-card-preview.awaiting-stamp .puzzle-card-placeholder{opacity:.3}
/*# sourceMappingURL=style.min.css.map */
